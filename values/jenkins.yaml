master:
  tag: 2.249.3-lts
  useSecurity: true
  adminUser: admin
  adminPassword: admin
  numExecutors: 1
  overwriteJobs: true
  initContainerEnv:
    #- name: JENKINS_UC
      #value: https://test.host.local
    #- name: JENKINS_UC_EXPERIMENTAL
      #value: https://test.host.local
    #- name: JENKINS_INCREMENTALS_REPO_MIRROR
      #value: https://test.host.local
    - name: JENKINS_UC_DOWNLOAD
      value: http://ftp-nyc.osuosl.org/pub/jenkins
  installPlugins:
    - kubernetes:1.25.7
    - workflow-job:2.40
    - workflow-api:2.40
    - workflow-aggregator:2.6
    - workflow-support:3.6
    - credentials-binding:1.24
    - job-dsl:latest
    - git:4.4.5
    - configuration-as-code:1.43
  additionalPlugins:
    - plugin-util-api:1.4.0
    - scm-api:2.6.4
    - bootstrap4-api:4.5.3-1
    - github:1.32.0
    - junit:1.43
    - lockable-resources:2.10
    - command-launcher:1.3
    - github-branch-source:2.9.1
    - docker-workflow:1.24
    - docker-commons:1.17
    - checks-api:1.1.0
    - pipeline-utility-steps:2.6.1
  overwritePlugins: true
  sidecars:
    configAutoReload:
      enabled: true
      reqRetryConnect: 30
  JCasC:
    enabled: true
    defaultConfig: true
    configScripts:
      jobs-config: |
        jobs:
          - script: >
              pipelineJob('deploy-nodejs-k8s-dev') {
                  displayName('[DEV] Build & Deploy NodeJS hello App')
                  definition {
                      cpsScm {
                          scm {
                              git {
                                  remote {
                                      url('https://github.com/mehyedes/nodejs-k8s.git')
                                  }
                                  branches('*/develop')
                              }
                          }
                          scriptPath('cicd/pipelines/dev.Jenkinsfile')
                      }
                  }
              }
          - script: >
              pipelineJob('deploy-nodejs-k8s-prod') {
                  displayName('[PROD] Build & Deploy NodeJS hello App')
                  definition {
                      cpsScm {
                          scm {
                              git {
                                  remote {
                                      url('https://github.com/mehyedes/nodejs-k8s.git')
                                  }
                                  branches('*/main')
                              }
                          }
                          scriptPath('cicd/pipelines/prod.Jenkinsfile')
                      }
                  }
              }

persistence:
  enabled: true

serviceAccount:
  create: false
  # Service account name is autogenerated by default
  name: jenkins
  annotations: {}

ingress:
  enabled: true
  paths: []
  apiVersion: "networking.k8s.io/v1"
  labels: {}
  annotations:
    kubernetes.io/ingress.class: nginx
  hostName: jenkins.default.local
  tls:
